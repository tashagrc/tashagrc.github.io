import{u as N,g as D,j as e,f as C,B as c,L as h}from"./index-D7hQoqRZ.js";import{u as T,n as k}from"./index-BxpbQwb9.js";import{S as g,a as j,b as v,c as y,d as m}from"./select-B_wpay6d.js";import{C as A}from"./card-DTv8pWJE.js";import{A as _}from"./articles-DllxwXJ8.js";const R=["updated","created"],d=_,b=Array.from(new Set(Object.values(d).flatMap(a=>a.tags??[]))).sort();function E(){T("Articles");const[a]=N(),r=D(),t=a.get("tag"),n=a.get("sort"),i=t&&b.includes(t)?t:"all",u=R.find(s=>s===n)??"updated",p=s=>{const l=new URLSearchParams(a);s==="all"?l.delete("tag"):l.set("tag",s),r({search:l.toString()},{replace:!0})},S=s=>{const l=new URLSearchParams(a);l.set("sort",s),r({search:l.toString()},{replace:!0})},w=Object.keys(d).filter(s=>{const l=d[s];if(l.draft===!0)return!1;const o=l.tags??[];return i==="all"||o.includes(i)}).sort((s,l)=>{const o=d[s],x=d[l];return u==="created"?new Date(x.created_at).getTime()-new Date(o.created_at).getTime():new Date(x.updated_at).getTime()-new Date(o.updated_at).getTime()});return e.jsx("div",{className:"flex flex-1 flex-col items-center gap-10",children:e.jsxs("div",{className:"w-full max-w-6xl space-y-10",children:[e.jsxs("div",{className:"flex flex-row justify-center items-center gap-4 text-4xl font-semibold",children:[e.jsx(k,{}),"Articles"]}),e.jsxs("div",{className:"flex justify-between flex-wrap gap-2 items-center mx-2 sm:mx-6 my-1 relative -top-2",children:[e.jsx(F,{tagFilter:i,setTagFilter:p}),e.jsx(P,{sortBy:u,setSortBy:S})]}),e.jsx(C,{}),e.jsx("div",{className:"grid grid-cols-1 w-full gap-4 px-2 sm:px-6",children:w.map(s=>e.jsx(L,{articleName:s,setTagFilter:p},s))})]})})}function F({tagFilter:a,setTagFilter:r}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{children:"Filter by tag:"}),e.jsxs(g,{value:a,onValueChange:r,children:[e.jsx(j,{className:"w-[180px] cursor-pointer",children:e.jsx(v,{placeholder:"Tag"})}),e.jsxs(y,{children:[e.jsx(m,{value:"all",children:"ðŸ·ï¸ All Tags"}),b.map(t=>e.jsx(m,{value:t,children:t},t))]})]}),a!=="all"&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>r("all"),className:"px-2 text-sm cursor-pointer text-muted-foreground",children:"Clear filter âœ•"})]})}function P({sortBy:a,setSortBy:r}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs(g,{value:a,onValueChange:r,children:[e.jsx(j,{className:"w-[160px] cursor-pointer",children:e.jsx(v,{placeholder:"Sort by"})}),e.jsxs(y,{children:[e.jsx(m,{value:"updated",children:"ðŸ•’ Last Updated"}),e.jsx(m,{value:"created",children:"ðŸ“… Created Time"})]})]})]})}function L({articleName:a,setTagFilter:r}){const t=d[a],n=t.url&&typeof t.url=="string";return e.jsx(A,{className:"rounded-md overflow-hidden py-4 px-4 sm:px-8",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[n?e.jsx(c,{asChild:!0,variant:"link",className:"p-0 h-7 text-base font-semibold text-left justify-start",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Read full article: ${t.title}`,children:t.title})}):e.jsx(c,{asChild:!0,variant:"link",className:"p-0 h-7 text-base font-semibold text-left justify-start",children:e.jsx(h,{to:`/articles/${a}`,"aria-label":`Read full article: ${t.title}`,children:t.title})}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:t.summary||"No summary available."}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:t.tags.map(i=>e.jsx(c,{variant:"secondary",size:"sm",onClick:()=>r(i),className:"rounded-sm cursor-pointer font-normal px-2 h-7.5 text-sm",children:i},i))}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground mt-auto pt-2",children:[e.jsxs("span",{children:["Published ",f(t.created_at),!$(t.created_at,t.updated_at)&&e.jsxs(e.Fragment,{children:[" â€¢ Updated ",f(t.updated_at)]})]}),n?e.jsx(c,{asChild:!0,variant:"link",className:"p-0 text-primary underline text-sm h-7.5",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Read full article: ${t.title}`,children:"Read More â†’"})}):e.jsx(c,{asChild:!0,variant:"link",className:"p-0 text-primary underline text-sm h-7.5",children:e.jsx(h,{to:`/articles/${a}`,"aria-label":`Read full article: ${t.title}`,children:"Read More â†’"})})]})]})})}function f(a){return new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function $(a,r){const t=new Date(a),n=new Date(r);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()}export{E as default};
